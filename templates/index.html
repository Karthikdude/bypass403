<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bypass403 CTF - Capture The Flags</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Roboto+Mono:wght@300;400;500&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="/static/styles.css" rel="stylesheet">
    <style>
        /* Modern design overrides styles from external CSS */
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>BypassX Testing Laboratory</h1>
            <p class="subtitle">Complete HTTP 403 Bypass Testing Suite - 60+ Protected Endpoints</p>
            {% if username %}
                <div class="user-info" style="margin: 20px 0; background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px;">
                    <h3 style="margin: 0; color: #fff;">üë§ Welcome, {{ username }}!</h3>
                    <p style="margin: 5px 0; color: #fff; opacity: 0.9;">Challenges Completed: {{ completed_challenges|length }}/60+</p>
                    
                    <!-- Session Export/Import Controls -->
                    <div class="session-controls" style="margin-top: 15px; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 8px; border: 1px solid rgba(255,255,255,0.1);">
                        <h4 style="margin: 0 0 10px 0; color: #fff; font-size: 0.9rem; opacity: 0.9;">üîÑ Session Management</h4>
                        <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                            <button onclick="exportSession()" style="background: var(--clr-primary-a30); color: var(--clr-surface-a0); border: 1px solid var(--clr-primary-a40); padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.8rem; font-weight: bold; transition: all 0.2s ease;">üì§ Export Progress</button>
                            <button onclick="showImportDialog()" style="background: var(--clr-surface-tonal-a20); color: var(--clr-primary-a50); border: 1px solid var(--clr-surface-tonal-a30); padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.8rem; font-weight: bold; transition: all 0.2s ease;">üì• Import Progress</button>
                        </div>
                    </div>
                    
                    <!-- Import Dialog (Initially Hidden) -->
                    <div id="importDialog" style="display: none; margin-top: 10px; padding: 15px; background: rgba(255,255,255,0.95); border-radius: 8px; border: 1px solid #ccc;">
                        <h5 style="margin: 0 0 10px 0; color: #333;">üì• Import Session Data</h5>
                        <textarea id="sessionData" placeholder="Paste your exported session JSON data here..." 
                                  style="width: 100%; height: 100px; padding: 8px; border: 1px solid #ccc; border-radius: 4px; font-family: monospace; font-size: 0.85rem; resize: vertical;"></textarea>
                        <div style="margin-top: 10px; display: flex; gap: 10px;">
                            <button onclick="importSession()" style="background: var(--clr-primary-a30); color: var(--clr-surface-a0); border: 1px solid var(--clr-primary-a40); padding: 8px 16px; border-radius: 4px; cursor: pointer; font-weight: bold; transition: all 0.2s ease;">‚úÖ Import</button>
                            <button onclick="hideImportDialog()" style="background: var(--clr-surface-tonal-a20); color: var(--clr-primary-a50); border: 1px solid var(--clr-surface-tonal-a30); padding: 8px 16px; border-radius: 4px; cursor: pointer; transition: all 0.2s ease;">‚ùå Cancel</button>
                        </div>
                        <div id="importFeedback" style="margin-top: 10px; padding: 8px; border-radius: 4px; display: none;"></div>
                    </div>
                    
                    <!-- Flag Submission Form -->
                    <div class="flag-submission" style="margin-top: 15px;">
                        <form method="POST" action="/" style="display: flex; gap: 10px; align-items: center;">
                            <input type="text" name="flag" placeholder="Enter captured flag..." 
                                   style="flex: 1; padding: 8px 12px; border: none; border-radius: 5px; font-family: monospace;" required>
                            <button type="submit" style="background: var(--clr-primary-a30); color: var(--clr-surface-a0); border: 1px solid var(--clr-primary-a40); padding: 8px 16px; border-radius: 5px; cursor: pointer; font-weight: bold; transition: all 0.2s ease;">üö© Submit Flag</button>
                        </form>
                    </div>
                </div>
                
                <!-- Flag Submission Feedback -->
                {% if message %}
                    <div class="flag-feedback" style="margin: 10px 0; padding: 12px; border-radius: 8px; background: rgba(255, 255, 255, 0.2); border: 1px solid #ffffff; color: #ffffff;">
                        <strong>{{ message }}</strong>
                    </div>
                {% endif %}
                
                <!-- Markdown Content Display -->
                {% if markdown_content %}
                    <div class="markdown-content">
                        <div class="technique-header">
                            <h2>Technique Details</h2>
                        </div>
                        <div class="markdown-body">
                            {{ markdown_content|safe }}
                        </div>
                    </div>
                {% endif %}
            {% endif %}
            <div class="status-badge">100% Success Rate</div>
            <div class="status-badge">149 Bypass Techniques</div>
            <div class="status-badge">16 Categories</div>
            <div class="status-badge">60+ Endpoints</div>
        </div>
        
        <div class="main-content">
            <div class="warning">
                <strong>‚ö†Ô∏è Important Security Notice</strong><br>
                <p>This laboratory is designed exclusively for authorized security testing and research purposes. All bypass techniques are implemented for educational and legitimate security assessment purposes only.</p>
                <div class="security-guidelines">
                    <h3>Security Guidelines:</h3>
                    <ul>
                        <li>Only use this laboratory for authorized testing</li>
                        <li>Do not attempt to bypass security controls on production systems</li>
                        <li>Report any security findings to the appropriate parties</li>
                        <li>Follow responsible disclosure guidelines</li>
                    </ul>
                </div>
            </div>
            
            <div class="about-section">
                <h2>About BypassX Laboratory</h2>
                <p>BypassX Testing Laboratory is a comprehensive platform designed to help security researchers, penetration testers, and security professionals test and understand various HTTP 403 bypass techniques. With over 60 protected endpoints, this laboratory covers a wide range of bypass scenarios across different security layers.</p>
                
                <div class="key-features">
                    <h3>Key Features</h3>
                    <ul>
                        <li>60+ protected endpoints for testing</li>
                        <li>Real-world security control implementations</li>
                        <li>Interactive testing environment</li>
                        <li>Modern bypass techniques coverage</li>
                        <li>Comprehensive documentation</li>
                    </ul>
                </div>
                
                <div class="usage-guidelines">
                    <h3>Usage Guidelines</h3>
                    <p>Before using this laboratory, please ensure you have proper authorization and follow these guidelines:</p>
                    <ul>
                        <li>Obtain proper authorization before testing</li>
                        <li>Document all test cases and findings</li>
                        <li>Follow ethical hacking principles</li>
                        <li>Report vulnerabilities responsibly</li>
                        <li>Respect privacy and data protection laws</li>
                    </ul>
                </div>
            </div>
            
            <h2>Laboratory Statistics</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>100%</h3>
                    <p>Success Rate</p>
                </div>
                <div class="stat-card">
                    <h3>60+</h3>
                    <p>Protected Endpoints</p>
                </div>
                <div class="stat-card">
                    <h3>149</h3>
                    <p>Bypass Techniques</p>
                </div>
                <div class="stat-card">
                    <h3>16</h3>
                    <p>Technique Categories</p>
                </div>
            </div>
            
            <div class="lab-endpoints">
                <h2>Complete Laboratory Endpoints</h2>
                
                <!-- Core Admin Endpoints -->
                <div class="endpoints-category">
                    <div class="category-header">üéØ Core Admin Endpoints</div>
                    <div class="endpoints-grid">
                        <div class="endpoint-card" onclick="testEndpoint('/admin')">
                            <span class="endpoint-url">/admin</span>
                            <div class="methods">GET, POST, PUT, DELETE, PATCH, HEAD, OPTIONS, TRACE</div>
                            <div class="description">Main admin panel with 15+ bypass vulnerabilities including method tampering, IP spoofing, header manipulation</div>
                            <span class="success-count">15+ bypasses</span>
                        </div>
                        
                        <div class="endpoint-card" onclick="testEndpoint('/api/admin')">
                            <span class="endpoint-url">/api/admin</span>
                            <div class="methods">GET, POST, PUT, DELETE, PATCH, HEAD, OPTIONS</div>
                            <div class="description">API admin endpoint vulnerable to path manipulation, double slash, content-type bypasses</div>
                            <span class="success-count">8+ bypasses</span>
                        </div>
                        
                        <div class="endpoint-card" onclick="testEndpoint('/secure')">
                            <span class="endpoint-url">/secure</span>
                            <div class="methods">GET, POST, HEAD, OPTIONS</div>
                            <div class="description">Secure area with authentication bypasses, basic auth, bearer token, WebSocket upgrade</div>
                            <span class="success-count">6+ bypasses</span>
                        </div>
                        
                        <div class="endpoint-card" onclick="testEndpoint('/internal')">
                            <span class="endpoint-url">/internal</span>
                            <div class="methods">GET, POST, HEAD</div>
                            <div class="description">Internal access with header pollution, X-Forwarded-For chain attacks</div>
                            <span class="success-count">4+ bypasses</span>
                        </div>
                        
                        <div class="endpoint-card" onclick="testEndpoint('/debug')">
                            <span class="endpoint-url">/debug</span>
                            <div class="methods">GET, POST, PUT, DELETE, PATCH, HEAD, OPTIONS, TRACE</div>
                            <div class="description">Debug endpoint with verb tunneling, fragment bypass, extension spoofing</div>
                            <span class="success-count">5+ bypasses</span>
                        </div>
                    </div>
                </div>
                
                <!-- Modern Security Bypasses -->
                <div class="endpoints-category">
                    <div class="category-header">üõ°Ô∏è Modern Security Bypasses</div>
                    <div class="endpoints-grid">
                        <div class="endpoint-card" onclick="testEndpoint('/waf')">
                            <span class="endpoint-url">/waf</span>
                            <div class="methods">GET, POST, PUT, DELETE, PATCH, HEAD, OPTIONS</div>
                            <div class="description">Modern WAF with Cloudflare-style protection, CF-Connecting-IP, cache deception, request smuggling</div>
                            <span class="success-count">10+ bypasses</span>
                        </div>
                        
                        <div class="endpoint-card" onclick="testEndpoint('/cdn')">
                            <span class="endpoint-url">/cdn</span>
                            <div class="methods">GET, POST, HEAD, OPTIONS</div>
                            <div class="description">CDN-specific bypasses: origin IP, cache key poisoning, edge location headers</div>
                            <span class="success-count">6+ bypasses</span>
                        </div>
                        
                        <div class="endpoint-card" onclick="testEndpoint('/api/v2/admin')">
                            <span class="endpoint-url">/api/v2/admin</span>
                            <div class="methods">GET, POST, PUT, DELETE, PATCH</div>
                            <div class="description">API v2 - JWT none algorithm, GraphQL introspection, API version downgrade, CORS preflight</div>
                            <span class="success-count">8+ bypasses</span>
                        </div>
                        
                        <div class="endpoint-card" onclick="testEndpoint('/microservice')">
                            <span class="endpoint-url">/microservice</span>
                            <div class="methods">GET, POST</div>
                            <div class="description">Microservice with Istio/Envoy, Kubernetes service account, container escape simulation</div>
                            <span class="success-count">6+ bypasses</span>
                        </div>
                        
                        <div class="endpoint-card" onclick="testEndpoint('/ml-protected')">
                            <span class="endpoint-url">/ml-protected</span>
                            <div class="methods">GET, POST</div>
                            <div class="description">ML/AI-based protection with adversarial evasion, timing attacks, feature poisoning</div>
                            <span class="success-count">5+ bypasses</span>
                        </div>
                    </div>
                </div>
                
                <!-- Protocol & Method Bypasses -->
                <div class="endpoints-category">
                    <div class="category-header">üîÑ Protocol & Method Bypasses</div>
                    <div class="endpoints-grid">
                        <div class="endpoint-card" onclick="testEndpoint('/method-override')">
                            <span class="endpoint-url">/method-override</span>
                            <div class="methods">GET, POST, PUT, DELETE, PATCH, HEAD, OPTIONS</div>
                            <div class="description">HTTP method override variations: X-HTTP-Method, X-Method-Override, _method parameter</div>
                            <span class="success-count">5+ bypasses</span>
                        </div>
                        
                        <div class="endpoint-card" onclick="testEndpoint('/http-version')">
                            <span class="endpoint-url">/http-version</span>
                            <div class="methods">GET, POST</div>
                            <div class="description">HTTP version bypass: HTTP/1.0 downgrade, HTTP/2 settings manipulation</div>
                            <span class="success-count">3+ bypasses</span>
                        </div>
                        
                        <div class="endpoint-card" onclick="testEndpoint('/connect-method')">
                            <span class="endpoint-url">/connect-method</span>
                            <p class="methods">CONNECT</p>
                            <p class="description">HTTP CONNECT method tunneling bypass.</p>
                        </div>
                    </div>
                </div>

                <!-- Advanced Path Manipulation -->
                <div class="endpoints-category">
                    <div class="category-header">üõ§Ô∏è Advanced Path Manipulation</div>
                    <div class="endpoints-grid">
                        <div class="endpoint-card" onclick="testEndpoint('/path-normalization')">
                            <span class="endpoint-url">/path-normalization</span>
                            <p class="methods">GET, POST, ...</p>
                            <p class="description">Path normalization bypasses (.., ./, //).</p>
                        </div>
                        <div class="endpoint-card" onclick="testEndpoint('/null-bytes')">
                            <span class="endpoint-url">/null-bytes</span>
                            <p class="methods">GET, POST, ...</p>
                            <p class="description">Null byte injection bypasses (%00).</p>
                        </div>
                        <div class="endpoint-card" onclick="testEndpoint('/path-params')">
                            <span class="endpoint-url">/path-params</span>
                            <p class="methods">GET, POST, ...</p>
                            <p class="description">Semicolon path parameters bypass (/;param=value).</p>
                        </div>
                        <div class="endpoint-card" onclick="testEndpoint('/fragment-bypass')">
                            <span class="endpoint-url">/fragment-bypass</span>
                            <p class="methods">GET, POST, ...</p>
                            <p class="description">URL fragment manipulation bypasses (#).</p>
                        </div>
                    </div>
                </div>

                <!-- Header Pollution & Smuggling -->
                <div class="endpoints-category">
                    <div class="category-header">ü§Ø Header Pollution & Smuggling</div>
                    <div class="endpoints-grid">
                        <div class="endpoint-card" onclick="testEndpoint('/header-pollution')">
                            <span class="endpoint-url">/header-pollution</span>
                            <p class="methods">GET, POST, ...</p>
                            <p class="description">Multiple header pollution techniques.</p>
                        </div>
                        <div class="endpoint-card" onclick="testEndpoint('/host-injection')">
                            <span class="endpoint-url">/host-injection</span>
                            <p class="methods">GET, POST, ...</p>
                            <p class="description">Host header injection variations.</p>
                        </div>
                        <div class="endpoint-card" onclick="testEndpoint('/xff-pollution')">
                            <span class="endpoint-url">/xff-pollution</span>
                            <p class="methods">GET, POST, ...</p>
                            <p class="description">X-Forwarded-For header pollution chains.</p>
                        </div>
                        <div class="endpoint-card" onclick="testEndpoint('/request-smuggling')">
                            <span class="endpoint-url">/request-smuggling</span>
                            <p class="methods">POST</p>
                            <p class="description">Request smuggling simulation (CL.TE, TE.CL).</p>
                        </div>
                    </div>
                </div>

                <!-- Load Balancer & Reverse Proxy -->
                <div class="endpoints-category">
                    <div class="category-header">‚öñÔ∏è Load Balancer & Reverse Proxy</div>
                    <div class="endpoints-grid">
                        <div class="endpoint-card" onclick="testEndpoint('/lb-bypass')">
                            <span class="endpoint-url">/lb-bypass</span>
                            <p class="methods">GET, POST, ...</p>
                            <p class="description">Load balancer specific bypasses (e.g., X-Forwarded-Host).</p>
                        </div>
                        <div class="endpoint-card" onclick="testEndpoint('/nginx-bypass')">
                            <span class="endpoint-url">/nginx-bypass</span>
                            <p class="methods">GET, POST, ...</p>
                            <p class="description">Nginx-specific bypass techniques (e.g., merge_slashes).</p>
                        </div>
                        <div class="endpoint-card" onclick="testEndpoint('/apache-bypass')">
                            <span class="endpoint-url">/apache-bypass</span>
                            <p class="methods">GET, POST, ...</p>
                            <p class="description">Apache-specific bypass methods.</p>
                        </div>
                        <div class="endpoint-card" onclick="testEndpoint('/haproxy-bypass')">
                            <span class="endpoint-url">/haproxy-bypass</span>
                            <p class="methods">GET, POST, ...</p>
                            <p class="description">HAProxy configuration bypasses.</p>
                        </div>
                    </div>
                </div>

                <!-- Content-Type & Accept Headers -->
                <div class="endpoints-category">
                    <div class="category-header">üìÑ Content-Type & Accept Headers</div>
                    <div class="endpoints-grid">
                        <div class="endpoint-card" onclick="testEndpoint('/content-type')">
                            <span class="endpoint-url">/content-type</span>
                            <p class="methods">POST, PUT</p>
                            <p class="description">Content-Type header bypasses (e.g., application/json).</p>
                        </div>
                        <div class="endpoint-card" onclick="testEndpoint('/accept-header')">
                            <span class="endpoint-url">/accept-header</span>
                            <p class="methods">GET</p>
                            <p class="description">Accept header manipulation (e.g., */*).</p>
                        </div>
                    </div>
                </div>

                <!-- Cache & CDN Advanced -->
                <div class="endpoints-category">
                    <div class="category-header">üíæ Cache & CDN Advanced</div>
                    <div class="endpoints-grid">
                        <div class="endpoint-card" onclick="testEndpoint('/cache-bypass')">
                            <span class="endpoint-url">/cache-bypass</span>
                            <p class="methods">GET</p>
                            <p class="description">Cache poisoning and deception techniques.</p>
                        </div>
                        <div class="endpoint-card" onclick="testEndpoint('/cdn-origin')">
                            <span class="endpoint-url">/cdn-origin</span>
                            <p class="methods">GET, POST, ...</p>
                            <p class="description">Direct origin server access bypasses.</p>
                        </div>
                    </div>
                </div>

                <!-- API Specific Bypasses -->
                <div class="endpoints-category">
                    <div class="category-header">üì° API Specific Bypasses</div>
                    <div class="endpoints-grid">
                        <div class="endpoint-card" onclick="testEndpoint('/graphql-bypass')">
                            <span class="endpoint-url">/graphql-bypass</span>
                            <p class="methods">POST</p>
                            <p class="description">GraphQL introspection and query manipulation.</p>
                        </div>
                        <div class="endpoint-card" onclick="testEndpoint('/jwt-bypass')">
                            <span class="endpoint-url">/jwt-bypass</span>
                            <p class="methods">POST</p>
                            <p class="description">JWT signature and algorithm bypasses.</p>
                        </div>
                    </div>
                </div>

                <!-- Container & Orchestration -->
                <div class="endpoints-category">
                    <div class="category-header">üê≥ Container & Orchestration</div>
                    <div class="endpoints-grid">
                        <div class="endpoint-card" onclick="testEndpoint('/docker-bypass')">
                            <span class="endpoint-url">/docker-bypass</span>
                            <div class="methods">GET, POST</div>
                            <div class="description">Docker-specific headers: X-Docker-Content-Trust, Docker-Content-Digest</div>
                            <span class="success-count">3+ bypasses</span>
                        </div>
                        
                        <div class="endpoint-card" onclick="testEndpoint('/k8s-bypass')">
                            <span class="endpoint-url">/k8s-bypass</span>
                            <div class="methods">GET, POST</div>
                            <div class="description">Kubernetes service bypasses: X-Kubernetes-Service, X-K8s-Namespace</div>
                            <span class="success-count">3+ bypasses</span>
                        </div>
                        
                        <div class="endpoint-card" onclick="testEndpoint('/istio-bypass')">
                            <span class="endpoint-url">/istio-bypass</span>
                            <div class="methods">GET, POST</div>
                            <div class="description">Istio/Envoy specific: X-Envoy-Peer-Metadata, X-Istio-Attributes</div>
                            <span class="success-count">3+ bypasses</span>
                        </div>
                    </div>
                </div>

                <!-- Miscellaneous Bypasses -->
                <div class="endpoints-category">
                    <div class="category-header">‚öôÔ∏è Miscellaneous Bypasses</div>
                    <div class="endpoints-grid">
                        <div class="endpoint-card" onclick="testEndpoint('/miscellaneous-bypass')">
                            <span class="endpoint-url">/miscellaneous-bypass</span>
                            <div class="methods">GET, POST</div>
                            <div class="description">Bypass with case-sensitive paths, query parameter reordering, and other uncategorized techniques.</div>
                            <span class="success-count">4+ bypasses</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="techniques-overview">
                <h2>Technique Categories Summary</h2>
                <div class="techniques-grid">
                    <div class="technique-category">
                        <h3>Protocol & Method (16)</h3>
                        <ul class="technique-list">
                            <li>HTTP Method Override</li>
                            <li>Version Manipulation</li>
                            <li>CONNECT Tunneling</li>
                            <li>OPTIONS Exploitation</li>
                            <li>TRACE Method</li>
                        </ul>
                    </div>
                    
                    <div class="technique-category">
                        <h3>Path Manipulation (24)</h3>
                        <ul class="technique-list">
                            <li>Directory Traversal</li>
                            <li>Path Normalization</li>
                            <li>Null Byte Injection</li>
                            <li>Semicolon Parameters</li>
                            <li>Fragment Manipulation</li>
                            <li>Unicode Variations</li>
                            <li>Double Encoding</li>
                        </ul>
                    </div>
                    
                    <div class="technique-category">
                        <h3>Header Pollution (18)</h3>
                        <ul class="technique-list">
                            <li>XFF Chain Pollution</li>
                            <li>Host Header Injection</li>
                            <li>Request Smuggling</li>
                            <li>Multiple Header Values</li>
                            <li>Header Case Manipulation</li>
                        </ul>
                    </div>
                    
                    <div class="technique-category">
                        <h3>Authentication (12)</h3>
                        <ul class="technique-list">
                            <li>Session Manipulation</li>
                            <li>Cookie Bypass</li>
                            <li>Token Abuse</li>
                            <li>JWT Manipulation</li>
                            <li>Bearer Token Bypass</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="test-section">
                <h2>Testing Actions</h2>
                <p>Explore the comprehensive bypass testing capabilities</p>
                <a href="/stats" class="test-button" target="_blank">üìä View Live Statistics</a>
                <a href="/" class="test-button" onclick="alert('Run: ./bypassx -u http://127.0.0.1:5000/admin -verbose')">üöÄ Run BypassX Tool</a>
                <a href="/" class="test-button" onclick="window.open('/admin', '_blank')">üéØ Test Admin Endpoint</a>
                <a href="/" class="test-button" onclick="window.open('/api/admin', '_blank')">‚ö° Test API Endpoint</a>
            </div>
        </div>
        
        <div class="footer">
            <p>&copy; 2025 BypassX Testing Laboratory - Advanced HTTP 403 Bypass Suite</p>
            <p>For authorized security testing and educational purposes only</p>
        </div>
    </div>
    
    <script>
        function testEndpoint(endpoint) {
            const baseUrl = window.location.origin;
            window.open(baseUrl + endpoint, '_blank');
        }
        
        // Session Export/Import Functions
        function exportSession() {
            fetch('/export', {
                method: 'GET',
                credentials: 'same-origin'
            })
            .then(response => response.json())
            .then(data => {
                const sessionData = JSON.stringify(data, null, 2);
                
                // Create a downloadable file
                const blob = new Blob([sessionData], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `bypass403_session_${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                alert('‚úÖ Session data exported successfully!');
            })
            .catch(err => {
                console.error('Export error:', err);
                alert('‚ùå Failed to export session data.');
            });
        }
        
        function showImportDialog() {
            document.getElementById('importDialog').style.display = 'block';
        }
        
        function hideImportDialog() {
            document.getElementById('importDialog').style.display = 'none';
            document.getElementById('sessionData').value = '';
            document.getElementById('importFeedback').style.display = 'none';
        }
        
        function importSession() {
            const sessionData = document.getElementById('sessionData').value.trim();
            const feedback = document.getElementById('importFeedback');
            
            if (!sessionData) {
                showFeedback('‚ùå Please paste session data first.', 'error');
                return;
            }
            
            // Validate JSON
            try {
                JSON.parse(sessionData);
            } catch (e) {
                showFeedback('‚ùå Invalid JSON format. Please check your data.', 'error');
                return;
            }
            
            fetch('/import', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: sessionData,
                credentials: 'same-origin'
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showFeedback('‚úÖ Session imported successfully! Refreshing page...', 'success');
                    setTimeout(() => {
                        window.location.reload();
                    }, 1500);
                } else {
                    showFeedback('‚ùå Import failed: ' + (data.error || 'Unknown error'), 'error');
                }
            })
            .catch(err => {
                console.error('Import error:', err);
                showFeedback('‚ùå Network error during import.', 'error');
            });
        }
        
        function showFeedback(message, type) {
            const feedback = document.getElementById('importFeedback');
            feedback.textContent = message;
            feedback.style.display = 'block';
            feedback.style.background = type === 'success' ? '#d4edda' : '#f8d7da';
            feedback.style.color = type === 'success' ? '#155724' : '#721c24';
            feedback.style.border = type === 'success' ? '1px solid #c3e6cb' : '1px solid #f5c6cb';
        }
        
        // Add interactive features
        document.addEventListener('DOMContentLoaded', function() {
            // Animate endpoint cards
            const endpointCards = document.querySelectorAll('.endpoint-card');
            endpointCards.forEach(card => {
                // Remove any existing inline styles that might be causing issues
                card.style.borderLeftColor = '';
                card.style.borderLeftWidth = '';
                
                card.addEventListener('mouseenter', function() {
                    this.style.borderLeftColor = '#ffffff';
                    this.style.borderLeftWidth = '6px';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.borderLeftColor = '#555555';
                    this.style.borderLeftWidth = '6px';
                });
            });
            
            // Add category toggle functionality
            const categoryHeaders = document.querySelectorAll('.category-header');
            categoryHeaders.forEach(header => {
                header.addEventListener('click', function() {
                    const grid = this.nextElementSibling;
                    if (grid.style.display === 'none') {
                        grid.style.display = 'grid';
                        this.style.opacity = '1';
                    } else {
                        grid.style.display = 'none';
                        this.style.opacity = '0.7';
                    }
                });
                
                header.style.cursor = 'pointer';
                header.title = 'Click to toggle category';
            });
        });
    </script>
</body>
</html>
